```{r}
#| label: setup
#| include: false

#LOAD LIBRARIES AND FUNCTIONS-----
library(here)
library(ddh)
library(ggplot2) #library(tidyverse)
library(gt)

#LOAD DATA-----
#app_data_dir <- here::here("data")
load_ddh_data(app_data_dir = here::here("data"))

#GET PRIVATE MESSAGES-----
private <- function(x, publicValue=NULL) {
  if (privateMode == TRUE) { x } else { publicValue }
}

private_message_html <- "This analysis is currently in Beta, and is only available to premium subscribers. If you want to upgrade to support this project and access these data, subscribe at ', a(href = 'http://www.datadrivenhypothesis.com', 'datadrivenhypothesis.com')"
private_message_md <- "This analysis is currently in Beta, and is only available to premium subscribers. If you want to upgrade to support this project and access these data, subscribe at [datadrivenhypothesis.com](http://www.datadrivenhypothesis.com)"

private_msg <- function() {
  if (privateMode == FALSE) {
    htmltools::tagList(private_message_html) 
  }
}

#QUERY URL
base_url <- dplyr::if_else(params$private == "true", paste0("datadrivenhypothesis.com"), paste0("datadrivenhypothesis.org"))
query_url <- glue::glue('https://www.{base_url}/?show=gene&query={params$content}')

```