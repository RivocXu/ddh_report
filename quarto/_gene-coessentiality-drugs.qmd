```{r}
#| label: gene-coessentiality-drugs-setup
#| echo: false
#| message: false
#| warning: false

# load_ddh_data(app_data_dir, #defined in setup
#               object_name = c("gene_drugs_cor_table"))

fig_legend <- make_legend(fun = "make_gene_drugs_cor_table")
```


```{r}
#| label: gene-coessentiality-drugs
#| echo: false
#| message: false
#| warning: false
#| eval: !expr as.logical(params$private)

make_gene_drugs_cor_table(input = list(type = params$type, content = params$content)) %>% 
  gt::gt() %>% 
  gt::cols_hide(columns = c("fav_gene", "r2")) %>% 
    gt::cols_label(
    drug = "Drug", 
    moa = "Mechansims", 
    z_score = "Z-score"
  ) %>% 
  gt::tab_options(table.width = gt::pct(100))

description <- glue::glue("This table shows drugs correlated with similar cell dependency profiles as {params$content}.")
```
  
`r if(params$private == "true"){description} else {private_message_md}`  