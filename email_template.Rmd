---
output: blastula::blastula_email
params:
  name: there
  type: "gene"
  subtype: "gene"
  query: "ROCK1"
  content: "ROCK1"
  private: TRUE
title: "`r params$content` Report"
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(include = FALSE)
library(tidyverse)
library(lubridate)
library(blastula)
library(htmltools)

#load functions

search_button <- function(private, 
                          type, 
                          query){
  tld <- dplyr::if_else(private == TRUE, "com", "org")
  cta_button <-
    add_cta_button(
      url = glue::glue('http://www.datadrivenhypothesis.{tld}/?show={type}&query={query}'),
      text = glue::glue('Explore {query}')
    )
  return(cta_button)
}

#good file name
  good_file_name <- params$content
  if (params$subtype == "gene_list" | params$subtype == "compound_list" | params$subtype == "cell_list") {
    good_file_name <- paste0("custom_", paste0(params$content, collapse="_"))
  }
```
#### Hey `r params$name`,  
Attached is the `r params$type` report you requested for `r params$query`. The attached report file contains a zipped directory of:  

- `r glue::glue("{good_file_name}_REPORT.html")` 
- a directory of *figures* for each of the images in the report, to easily include in presentations or manuscripts  
  
Also, you can always head back to the data-driven hypothesis website to explore `r params$query` further by clicking the button below.

`r search_button(private = params$private, type = params$type, query = params$query)`


Stay curious,  
Your friends at Data-Driven Hypothesis

